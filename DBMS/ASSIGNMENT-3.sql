USE CRICKET_TOURNAMENT;

/*
1. PERSON - PK(DRIVER ID)
2. CAR - PK(REGISTER NUMBER)
3. ACCIDENT - PK(REPORT NUMBER)
4. OWNS - FK(DRIVER_ID, REGISTRATION NUMBER) & BOTH ARE COMPOSIT KEY
5. PARTICIPATED - FK( DRIVER_ID, REGISTRATION NUMBER, REPORT_NUMBER), & ALL ARE COMPOSIT KEY 
*/

/* PERSON TABLE */
CREATE TABLE PERSON(
	DRIVER_ID INT PRIMARY KEY,
    PNAME VARCHAR(20),
    ADDRESS VARCHAR(20)
);

/* CAR TABLE */
CREATE TABLE CAR(
	REG_NO VARCHAR(10) PRIMARY KEY,
    MODEL VARCHAR(10),
    RYEAR INT
);

/* OWNS */
CREATE TABLE OWNS(
	DRIVER_ID INT,
    REG_NO VARCHAR(10),
    FOREIGN KEY(DRIVER_ID) REFERENCES PERSON(DRIVER_ID),
    FOREIGN KEY(REG_NO) REFERENCES CAR(REG_NO)
);

/* ACCIDENT */
CREATE TABLE ACCIDENT(
	REPORT_NO INT PRIMARY KEY,
    ACCIDENT_DATE DATE,
    LOCATION VARCHAR(20)
);

/* PARTICIPATED */
CREATE TABLE PARTICIPATED(
	REPORT_NO INT,
    REG_NO VARCHAR(10),
    DRIVER_ID INT,
    DAMAGE_AMT INT,
    FOREIGN KEY(DRIVER_ID) REFERENCES PERSON(DRIVER_ID),
    FOREIGN KEY(REG_NO) REFERENCES CAR(REG_NO),
    FOREIGN KEY(REPORT_NO) REFERENCES ACCIDENT(REPORT_NO)
);


SELECT * FROM PERSON;
SELECT * FROM CAR;
SELECT * FROM OWNS;
SELECT * FROM ACCIDENT;
SELECT * FROM PARTICIPATED;


/* INSERT DATA - PERSON */
INSERT INTO PERSON VALUES
(0, 'Jenson Button', 'University St'),
(1, 'Rubens Barrichello', '1st Ave'),
(2, 'Sebastian Vettel', '1st Ave'),
(3, 'Mark Webber', '1st Ave'),
(4, 'Lewis Hamilton', '1st Ave'),
(5, 'Felipe Massa', 'University St');

/* INSERT DATA - CAR */
INSERT INTO CAR VALUES
('SZM813','Honda',2009),
('SZM814','Toyota',2009),
('SZM815','BMW',2009),
('SZM816','Honda',2009),
('SZM817','Honda',2008),
('SZM818','BMW',2008),
('SZM819','BMW',2008),
('SZM820','Toyota',2008);

/* INSERT DATA - OWNS */
INSERT INTO OWNS VALUES
(0,'SZM813'),
(1,'SZM814'),
(2,'SZM815'),
(3,'SZM816'),
(4,'SZM817'),
(5,'SZM818'),
(0,'SZM819'),
(4,'SZM820');

/* INSERT DATA - ACCIDENT */
INSERT INTO ACCIDENT VALUES
(1,'2008-04-13','Monza'),
(2,'2008-07-22','Indianapolis'),
(3,'2008-07-22','Indianapolis'),
(4,'2008-07-22','New Work'),
(5,'2008-07-27','New Work'),
(6,'2009-01-27','Highland Heights'),
(7,'2009-02-15','Highland Heights');

/* INSERT DATA - PARTICIPATED */